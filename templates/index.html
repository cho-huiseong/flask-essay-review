<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>아카데미창 · 다쓰 리포트</title>

<!-- Fonts & Libs -->
<link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

<style>
:root{
  /* Design Tokens */
  --brand:#2140B1; --brand-700:#1a2f91; --brand-300:#4060d9;
  --ink:#111827; --muted:#6B7280; --line:rgba(17,24,39,.10);
  --bg:#f7f9ff; --white:#fff;
  --glass:rgba(255,255,255,.55);
}
*{ font-family:'SUIT',system-ui,sans-serif; letter-spacing:-.2px }
html,body{ margin:0; color:var(--ink); background:var(--bg) }
a{ color:inherit; text-decoration:none }
.container{ max-width:1180px; margin:0 auto; padding:0 24px }

/* Header (Toss-like glass) */
header{
  position:sticky; top:0; z-index:20; background:rgba(255,255,255,.75);
  backdrop-filter:blur(10px); border-bottom:1px solid var(--line);
}
.nav{ height:66px; display:flex; align-items:center; justify-content:space-between }
.nav-left{ display:flex; align-items:center; gap:10px; font-weight:900 }
.nav-right{ display:flex; gap:16px; align-items:center }
.nav-link{ color:#374151; font-weight:700 }
.nav-link:hover{ color:var(--ink) }

/* Buttons */
.btn{ border:none; height:46px; padding:0 18px; border-radius:14px; font-weight:800; cursor:pointer; transition:all .2s }
.btn-primary{ background:var(--brand); color:#fff; box-shadow:0 8px 20px rgba(33,64,177,.18) }
.btn-primary:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(33,64,177,.22) }
.btn-ghost{ background:#fff; border:1px solid #e5e7eb }
.btn-chip{ height:40px; background:#EEF2FF; color:var(--brand-700); border-radius:999px; font-weight:900 }

/* Sections */
.section{ padding:56px 0 }
.section-tight{ padding:36px 0 }
.muted{ color:var(--muted) }
.card{ background:var(--white); border:1px solid #eef2ff; border-radius:18px; padding:18px; box-shadow:0 12px 30px rgba(17,24,39,.06) }
.badge{ font-weight:900; color:var(--brand-700); background:#EEF2FF; border:1px solid #e6ebff; padding:6px 10px; border-radius:999px; display:inline-flex; align-items:center; gap:6px }

/* HERO */
.hero{
  padding:96px 0 62px;
  background:
    radial-gradient(1200px 600px at 80% -30%, rgba(33,64,177,.22), transparent),
    radial-gradient(900px 500px at -10% 20%, rgba(33,64,177,.12), transparent),
    linear-gradient(180deg, #ffffff 0%, #f7f9ff 60%);
  border-bottom:1px solid var(--line);
}
.hero h1{ margin:0 0 12px; font-size:clamp(36px,6vw,64px); line-height:1.08; font-weight:900 }
.hero p{ margin:0 0 24px; font-size:18px; color:#4b5563 }

/* Feature Row (Process) */
.process{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px }
.process .item{ display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center; padding:18px; border-radius:18px;
  background:rgba(255,255,255,.75); backdrop-filter:blur(8px); border:1px solid #eef2ff; box-shadow:0 12px 30px rgba(17,24,39,.06) }
.process .item .icon{ font-size:22px }
.process .item b{ font-size:16px }
@media (max-width:960px){ .process{ grid-template-columns:1fr 1fr } }

/* Triple feature (why us) */
.grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px }
@media (max-width:960px){ .grid-3{ grid-template-columns:1fr } }
.grid-4{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px }
@media (max-width:1100px){ .grid-4{ grid-template-columns:1fr 1fr } }
@media (max-width:640px){ .grid-4{ grid-template-columns:1fr } }

/* Comparison */
.compare{ display:grid; grid-template-columns:1fr 1fr; gap:16px }
@media (max-width:960px){ .compare{ grid-template-columns:1fr } }
.compare .col h3{ margin:0; font-size:18px }
.ul{ margin:10px 0 0 0; padding-left:18px; color:#374151 }
.ul li{ margin:6px 0 }

/* Editor (AI 첨삭 섹션) */
.panel{ background:var(--glass); backdrop-filter:blur(14px); border:1px solid rgba(255,255,255,.5);
  border-radius:22px; padding:22px; box-shadow:0 10px 30px rgba(17,24,39,.1) }
.form-label{ font-weight:900; margin:12px 0 6px; display:block }
.input,.textarea{ width:100%; padding:14px 16px; border:1px solid #e5e7eb; border-radius:12px; font-size:16px; line-height:1.6; resize:none }
.input:focus,.textarea:focus{ outline:none; border-color:var(--brand); box-shadow:0 0 0 3px rgba(33,64,177,.18) }
.textarea::placeholder,.input::placeholder{ color:#9CA3AF }
#passages{ display:grid; grid-template-columns:1fr 1fr; gap:14px }
@media (max-width:680px){ #passages{ grid-template-columns:1fr } }
.kpi{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
@media (max-width:900px){ .kpi{ grid-template-columns:1fr } }

.fade{ animation:fadeUp .45s ease }
@keyframes fadeUp{ from{ opacity:0; transform:translateY(8px) } to{ opacity:1; transform:none } }
.hidden{ display:none }
</style>
</head>

<body>
<!-- Header -->
<header>
  <div class="container nav">
    <div class="nav-left" style="gap:10px">
      <div style="width:10px;height:10px;border-radius:50%;background:var(--brand)"></div>
      <span>아카데미창</span>
    </div>
    <div class="nav-right">
      <a href="#services" class="nav-link" onclick="scrollToId('services')">서비스</a>
      <a href="#guide" class="nav-link" onclick="scrollToId('guide')">이용안내</a>
      <a href="#pricing" class="nav-link" onclick="scrollToId('pricing')">가격</a>
      <button class="btn btn-primary" onclick="go('editor')">AI 첨삭하기</button>
    </div>
  </div>
</header>

<main>
  <!-- ===================== HOME (랜딩) ===================== -->
  <section id="homeSection" class="hero">
    <div class="container">
      <div class="badge">✨ 논술 AI 첨삭 · 상담용 리포트</div>
      <h1>글 평가와 예시 작성,<br/>더 쉽고 간편하게</h1>
      <p>학생 글 입력 → AI 평가/그래프 → 제시문 기반 예시답안 → PDF 저장까지, 한 번에.</p>
      <div style="display:flex; gap:12px; flex-wrap:wrap">
        <button class="btn btn-primary" style="height:52px" onclick="go('editor')">시작하기</button>
        <button class="btn btn-ghost" style="height:52px" onclick="scrollToId('services')">예시 미리보기</button>
      </div>

      <!-- Process row -->
      <div class="section-tight"></div>
      <div class="process">
        <div class="item">
          <div class="icon">✍️</div><b>논술 입력</b>
          <div class="muted">질문·제시문·논술문</div>
        </div>
        <div class="item">
          <div class="icon">📊</div><b>평가 카드/그래프</b>
          <div class="muted">점수와 근거</div>
        </div>
        <div class="item">
          <div class="icon">💡</div><b>예시답안</b>
          <div class="muted">제시문만 활용</div>
        </div>
        <div class="item">
          <div class="icon">📄</div><b>PDF 저장</b>
          <div class="muted">기록 보관</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Us -->
  <section id="services" class="section">
    <div class="container">
      <h2 style="margin:0 0 8px; font-size:28px; font-weight:900">다쓰 리포트, 왜 좋아요?</h2>
      <p class="muted" style="margin:0 0 18px">상담 현장에서 바로 설득 가능한 결과물 중심 설계</p>
      <div class="grid-4">
        <div class="card">
          <h3 style="margin:0 0 6px">✅ 제시문 기반 평가</h3>
          <p class="muted">외부 지식 없이 제시문만 근거로 채점과 이유를 제공합니다.</p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px">📈 토스 감성 차트</h3>
          <p class="muted">둥근 막대·값 라벨·부드러운 이징으로 한눈에 이해되는 그래프.</p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px">🎯 총점·판정 표시</h3>
          <p class="muted">40점 만점, 30/36 기준선, 😅/🙂/🥳 이모지로 기분 나쁘지 않은 피드백.</p>
        </div>
        <div class="card">
          <h3 style="margin:0 0 6px">📦 PDF 리포트</h3>
          <p class="muted">이름·날짜·논술문·평가요약·예시답안·비교분석까지 한 번에 저장.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How it Works / Guide -->
  <section id="guide" class="section" style="background:#fff">
    <div class="container compare">
      <div class="col">
        <span class="badge">이용안내</span>
        <h2 style="margin:8px 0 12px; font-size:28px; font-weight:900">1분이면 시작 가능</h2>
        <ul class="ul">
          <li><b>학생·질문·제시문·논술문</b>을 입력하고 <b>리포트 생성</b>을 눌러요.</li>
          <li>AI가 <b>논리·독해·구성·표현</b>을 점수화하고 이유를 제공해요.</li>
          <li><b>예시답안·비교분석</b>으로 설득력 있는 코칭이 가능해요.</li>
          <li>결과는 <b>PDF</b>로 저장·공유할 수 있어요.</li>
        </ul>
        <div style="margin-top:14px">
          <button class="btn btn-chip" onclick="go('editor')">동의하고 시작하기</button>
        </div>
      </div>
      <div class="col">
        <div class="card">
          <h3 style="margin:0">판정 기준</h3>
          <p class="muted" style="margin:6px 0 12px">총점 40점 / 30·36 기준선</p>
          <div class="grid-3">
            <div class="card"><b>😅 다시 쓰기</b><br/><span class="muted">&lt; 30점</span></div>
            <div class="card"><b>🙂 예비</b><br/><span class="muted">30 ~ 35점</span></div>
            <div class="card"><b>🥳 합격</b><br/><span class="muted">≥ 36점</span></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Value props (4 icons like Toss credit page) -->
  <section class="section">
    <div class="container">
      <h2 style="margin:0 0 8px; font-size:28px; font-weight:900">성장을 위한 디테일</h2>
      <p class="muted" style="margin:0 0 18px">“검열”이 아니라 “동행”의 어조로, 더 멀리 날게</p>
      <div class="grid-4">
        <div class="card">
          <div style="font-size:26px">🧭</div>
          <h3 style="margin:8px 0 4px">정확한 가이드</h3>
          <p class="muted">이유가 곁들여진 피드백으로 다음 한 걸음이 명확합니다.</p>
        </div>
        <div class="card">
          <div style="font-size:26px">🧩</div>
          <h3 style="margin:8px 0 4px">구성력 보강</h3>
          <p class="muted">논지 전개·문단 구성·근거 배치를 자연스럽게 안내합니다.</p>
        </div>
        <div class="card">
          <div style="font-size:26px">🗣️</div>
          <h3 style="margin:8px 0 4px">표현력 개선</h3>
          <p class="muted">중복·모호 표현을 줄이고 핵심이 살아나는 문장으로.</p>
        </div>
        <div class="card">
          <div style="font-size:26px">📚</div>
          <h3 style="margin:8px 0 4px">상담 최적화</h3>
          <p class="muted">학부모·학생에게 바로 보여주는 리포트 중심 UI.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing -->
  <section id="pricing" class="section-tight">
    <div class="container grid-3">
      <div class="card">
        <h3 style="margin:0 0 6px">베이직</h3>
        <p class="muted">필수 기능 · 기본 PDF</p>
        <button class="btn btn-primary" style="margin-top:8px" onclick="go('editor')">시작하기</button>
      </div>
      <div class="card">
        <h3 style="margin:0 0 6px">프로</h3>
        <p class="muted">무제한 · 로고/브랜드 PDF</p>
        <button class="btn btn-primary" style="margin-top:8px" onclick="go('editor')">시작하기</button>
      </div>
      <div class="card">
        <h3 style="margin:0 0 6px">팀/학원</h3>
        <p class="muted">여러 계정 · 대시보드</p>
        <button class="btn btn-primary" style="margin-top:8px" onclick="go('editor')">시작하기</button>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="section" style="padding:46px 0 64px">
    <div class="container card" style="text-align:center">
      <h2 style="margin:0 0 10px; font-weight:900">지금, 학생의 글에 날개를</h2>
      <p class="muted" style="margin:0 0 16px">오늘의 작은 수정이, 내일의 큰 도약을 만듭니다.</p>
      <button class="btn btn-primary" style="height:52px" onclick="go('editor')">AI 첨삭하기</button>
    </div>
  </section>

  <!-- ===================== EDITOR (AI 첨삭) ===================== -->
  <section id="editorSection" class="section hidden">
    <div class="container">

      <!-- 입력 패널 -->
      <div class="panel fade">
        <h2 style="margin:0 0 12px; font-weight:900">✨ 너의 글, 오늘 더 멀리 날아가게.</h2>
        <p class="muted" style="margin-top:0">정성껏 쓴 문장 위에 필요한 피드백만 얹어, 목표에 닿도록 부드럽게 이끌어 드릴게요.</p>

        <label class="form-label">학생 이름</label>
        <input id="studentName" class="input" placeholder="예: 홍길동" />

        <label class="form-label">질문</label>
        <textarea id="question" class="textarea" rows="2" placeholder="질문을 여기에 작성해 주세요."></textarea>

        <label class="form-label">제시문 <span class="muted">(최소 1개)</span></label>
        <div id="passages">
          <textarea class="passage textarea" rows="3" placeholder="제시문을 그대로 적어 주세요."></textarea>
        </div>
        <div style="display:flex; justify-content:flex-end; margin-top:8px">
          <button type="button" class="btn btn-ghost" onclick="addPassage()">➕ 제시문 더 추가</button>
        </div>

        <label class="form-label">논술문 <span class="muted">(학생 작성 글)</span></label>
        <textarea id="essay" class="textarea" rows="6" placeholder="제시문만 근거로, 배경지식 없이 작성해 주세요." oninput="updateCharCount()"></textarea>
        <div id="charCount" class="muted" style="margin-top:6px"></div>

        <label class="form-label">글자 수 제한</label>
        <div style="display:flex; gap:10px">
          <input id="charLimit" class="input" placeholder="예: 700" />
          <input id="charRange" class="input" placeholder="± 예: 50" />
        </div>

        <div style="margin-top:18px; text-align:center">
          <button class="btn btn-primary" onclick="submitEssay()">⚡ 리포트를 준비하고 있어요</button>
        </div>
        <div id="loading" class="muted" style="display:none; margin-top:8px">⏳ 읽고 있어요… 문장 사이사이의 진심까지 놓치지 않을게요.</div>
        <div id="error" class="muted" style="display:none; color:#dc2626; margin-top:8px">잠시 숨 고르는 중이에요. 곧 다시 도와드릴게요.</div>
      </div>

      <!-- 결과 -->
      <div id="resultCard" class="panel fade hidden" style="margin-top:18px">
        <h3 style="margin-top:0">📋 결과</h3>
        <div id="evalSummary"></div>
      </div>

      <!-- 예시/비교 + PDF -->
      <div id="exampleSection" class="panel fade hidden" style="margin-top:18px">
        <h3>📝 한 걸음 더, 이렇게 다듬어봤어요.</h3>
        <div id="exampleOutput" class="card" style="background:#fff"></div>
        <div id="comparisonOutput" class="card" style="background:#fff"></div>
        <button class="btn btn-primary" style="margin-top:14px" onclick="downloadPDF()">📥 PDF 저장</button>
        <button class="btn btn-ghost" style="margin-top:14px" onclick="resetReport()">🔄 새 리포트 시작</button>
      </div>

    </div>
  </section>
</main>

<script>
/* ============ Router (Home <-> Editor) ============ */
function show(section){
  document.getElementById('homeSection').classList.toggle('hidden', section!=='home');
  document.getElementById('editorSection').classList.toggle('hidden', section!=='editor');
  window.scrollTo({ top:0, behavior:'instant' });
}
function go(section){
  location.hash = (section==='editor' ? '#editor' : '#home');
  show(section);
}
function scrollToId(id){ document.getElementById(id)?.scrollIntoView({behavior:'smooth'}); }
function routeFromHash(){
  const h=(location.hash||'').toLowerCase();
  if(h==='#editor') show('editor'); else show('home');
}
window.addEventListener('hashchange', routeFromHash);
window.addEventListener('DOMContentLoaded', routeFromHash);

/* ============ Editor Logic ============ */
let scoreChart, savedScores=[], savedReasons={}, savedExample="", savedComparison="";

function addPassage(){
  const t=document.createElement('textarea');
  t.className='passage textarea'; t.rows=3; t.placeholder='제시문을 그대로 적어 주세요.';
  document.getElementById('passages').appendChild(t);
}
function updateCharCount(){
  const essay=document.getElementById('essay').value;
  document.getElementById('charCount').innerText=`현재 글자 수: ${essay.length}`;
}
function getTotalAndStatus(scores){
  const total=(scores||[]).reduce((a,b)=>a+(parseInt(b)||0),0);
  let status={label:"예비",desc:"조금만 다듬으면 더 좋아져요.",emoji:"🙂",tone:"#f59e0b"};
  if(total<30) status={label:"다시 쓰기",desc:"다음 시도에서 더 단단해질 거예요.",emoji:"😅",tone:"#ef4444"};
  else if(total>=36) status={label:"합격",desc:"지금도 충분히 설득력 있어요!",emoji:"🥳",tone:"#10b981"};
  return { total, status };
}

async function submitEssay(){
  document.getElementById('loading').style.display='block';
  document.getElementById('error').style.display='none';
  try{
    const name=document.getElementById('studentName').value;
    const question=document.getElementById('question').value;
    const passages=[...document.querySelectorAll('.passage')].map(p=>p.value);
    const essay=document.getElementById('essay').value;
    const limit=document.getElementById('charLimit').value;
    const range=document.getElementById('charRange').value;

    const r=await fetch('/review',{method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({name,question,passages,essay,limit,range})});
    const data=await r.json();
    savedScores=data.scores; savedReasons=data.reasons;

    const { total, status } = getTotalAndStatus(savedScores);
    const progress=`
      <div style="margin-top:8px">
        <div style="position:relative;height:10px;background:#eef2ff;border-radius:999px;overflow:hidden">
          <div style="width:${(total/40)*100}%;height:100%;background:${status.tone};transition:width .5s"></div>
          <div style="position:absolute;left:${(30/40)*100}%;top:0;bottom:0;width:2px;background:rgba(17,24,39,.15)"></div>
          <div style="position:absolute;left:${(36/40)*100}%;top:0;bottom:0;width:2px;background:rgba(17,24,39,.25)"></div>
        </div>
        <div class="muted" style="display:flex;justify-content:space-between;font-size:12px;margin-top:6px">
          <span>0</span><span>30(예비)</span><span>36(합격)</span><span>40</span>
        </div>
      </div>`;

    document.getElementById('evalSummary').innerHTML=`
      <div class="card" style="display:flex;align-items:center;gap:14px">
        <div style="font-size:30px">${status.emoji}</div>
        <div style="flex:1">
          <div style="font-weight:900">총점 <span style="color:${status.tone}">${total}</span> / 40 ·
            <span style="color:${status.tone}">${status.label}</span></div>
          <div class="muted" style="margin-top:4px">${status.desc}</div>
          ${progress}
        </div>
        <div style="position:relative; width:110px; height:110px">
          <svg width="110" height="110">
            <circle r="52" cx="55" cy="55" fill="transparent" stroke="#eef2ff" stroke-width="10"></circle>
            <circle r="52" cx="55" cy="55" fill="transparent" stroke="${status.tone}" stroke-width="10"
              stroke-dasharray="327" stroke-dashoffset="${327-(327*(total/40))}"></circle>
          </svg>
          <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-weight:900">${total}</div>
        </div>
      </div>

      <div class="kpi" style="margin-top:14px">
        ${['논리력','독해력','구성력','표현력'].map((k,i)=>`
          <div class="card">
            <div style="font-weight:800">${k} (${savedScores[i]}점)</div>
            <div class="muted" style="margin-top:6px">${savedReasons[k]}</div>
          </div>
        `).join('')}
      </div>

      <div style="margin-top:22px"><canvas id="scoreChart" height="280"></canvas></div>
    `;

    // Chart
    const ctx=document.getElementById('scoreChart').getContext('2d');
    const grad=ctx.createLinearGradient(0,0,0,280);
    grad.addColorStop(0,"rgba(33,64,177,.95)"); grad.addColorStop(1,"rgba(33,64,177,.55)");
    if(scoreChart) scoreChart.destroy();
    scoreChart=new Chart(ctx,{
      type:'bar',
      data:{ labels:['논리력','독해력','구성력','표현력'], datasets:[{ data:savedScores, backgroundColor:grad, borderRadius:12, barThickness:42 }]},
      options:{
        animation:{ duration:900, easing:'easeOutQuart' },
        scales:{ x:{ grid:{ display:false }, ticks:{ color:'#6B7280' } },
                 y:{ beginAtZero:true, max:10, ticks:{ stepSize:1, color:'#9CA3AF' }, grid:{ color:'rgba(17,24,39,.06)' } } },
        plugins:{ legend:{ display:false }, tooltip:{ backgroundColor:'#111827', titleColor:'#fff', bodyColor:'#E5E7EB', cornerRadius:10, displayColors:false } }
      },
      plugins:[{ afterDatasetsDraw(chart){ const {ctx,data}=chart; ctx.save(); ctx.font='600 12px SUIT'; ctx.fillStyle='#1F2937'; ctx.textAlign='center';
        chart.getDatasetMeta(0).data.forEach((b,i)=>{ const v=data.datasets[0].data[i]; const {x,y}=b.tooltipPosition(); ctx.fillText(v,x,y-12); }); ctx.restore(); } }]
    });

    document.getElementById('loading').style.display='none';
    document.getElementById('resultCard').classList.remove('hidden');

    // Example & Comparison
    const r2=await fetch('/example',{method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({name,question,passages,essay})});
    const data2=await r2.json();
    savedExample=data2.example; savedComparison=data2.comparison;
    document.getElementById('exampleOutput').innerHTML=savedExample.replace(/\n/g,'<br>');
    document.getElementById('comparisonOutput').innerHTML=savedComparison.replace(/\n/g,'<br>');
    document.getElementById('exampleSection').classList.remove('hidden');

  }catch(e){
    console.error(e);
    document.getElementById('loading').style.display='none';
    document.getElementById('error').style.display='block';
  }
}

function downloadPDF(){
  const name=document.getElementById('studentName').value;
  const essay=document.getElementById('essay').value;
  const today=new Date().toISOString().split('T')[0];
  const { total, status } = getTotalAndStatus(savedScores);
  const wrap=document.createElement('div');
  wrap.innerHTML=`
    <h2>다쓰 리포트</h2><p>학생:${name} | 날짜:${today}</p>
    <div style="border:1px solid #e5e7eb;border-radius:12px;padding:12px;margin:12px 0;">
      <b>총점:</b> <span style="color:${status.tone}">${total}</span>/40 · <b style="color:${status.tone}">${status.label}</b>
      <div style="margin-top:6px;height:8px;background:#eef2ff;border-radius:999px;overflow:hidden">
        <div style="width:${(total/40)*100}%;height:100%;background:${status.tone}"></div>
      </div>
      <div style="color:#6b7280;font-size:12px;margin-top:4px">${status.desc}</div>
    </div>
    <h3>작성한 논술문</h3><p>${essay.replace(/\n/g,'<br>')}</p>
    <h3>평가 요약</h3>
    ${['논리력','독해력','구성력','표현력'].map((k,i)=>`<p><b>${k} (${savedScores[i]}점)</b><br>${savedReasons[k]}</p>`).join('')}
    <h3>예시답안</h3><p>${savedExample.replace(/\n/g,'<br>')}</p>
    <h3>비교 분석</h3><p>${savedComparison.replace(/\n/g,'<br>')}</p>
    <footer style="margin-top:24px;color:#6b7280;font-size:13px;">오늘의 작은 수정이, 내일의 큰 도약을 만들어요.</footer>
  `;
  html2pdf().from(wrap).set({margin:10, filename:`다쓰_리포트_${today}.pdf`,
    html2canvas:{scale:2}, jsPDF:{unit:'mm', format:'a4', orientation:'portrait'} }).save();
}

function resetReport(){ location.hash='#home'; routeFromHash(); }
</script>

</body>
</html>
